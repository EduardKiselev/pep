{% extends "base.html" %}
{% block title %}
  главная страница Калькулятора
{% endblock %}
{% block content %}
    <form>
      <label> Добавить в список: </label>
      <input type="text" list="foodlist" name="food" Placeholder="Введите название продукта" class="form-control" style="width:300px;">
      <datalist id="foodlist">
   {% for results in showfood %}
          <option value="{{ results.description}}">
   {% endfor %}
      </datalist>
      <button type="submit" class="btn btn-outline-primary"><a class="text-decoration-none text-reset">Добавить</a></button>
    </form>
    
    <form>
      <label> Убрать из списка: </label>
      <input type="text" list="foodremovelist" name="remove_food" Placeholder="Введите название продукта" class="form-control" style="width:300px;">
      <datalist id="foodremovelist">
          {% for results in delete_list %}
                 <option value="{{ results.description}}">
          {% endfor %}
      </datalist>
      
      <button type="submit" class="btn btn-outline-primary"><a class="text-decoration-none text-reset">Убрать</a></button>
      </form>


     {% if request.GET.food %} <p><h2> {{request.GET.food}} добавлен!</h2></p> {% endif %}
     {% if request.GET.remove_food %} <p><h2> {{request.GET.remove_food}} убран!</h2></p> {% endif %} 
    {% for food in chosen %}
    <p> {{food}} </p>
    {% endfor %}

    {% if delete_list %}
      <table>
        <caption>
          <h2> Калькулятор </h2>
        </caption>
        <thead>
          <tr>
          {% for column in columns %}
            {% if forloop.first%}
             <th> Food </th>
            {% endif %}
            <th> {{column}} </th>
          {% endfor %}
          </tr>
        </thead>
        <tbody>
        {% for row in items %}
          <tr>
          {% for column in columns %}
            {% if forloop.first%}

            <td>{{row.food_id}}</td>
            {% else %}
            <td>
              {% for elem in row %}
              {% if elem.id == column.id %}  
              {{ elem.amount }}
              {% endif %}
            </td>
              {% comment %} {{column.id}}
              {{column.name}}
              {{column.unit}} {% endcomment %}
             {% comment %} <td>{{ column }}</td> {% endcomment %}
              {% endfor %}
            {% endif %}
          {% endfor %}
          </tr>
       {% endfor %}
        </tbody>
      </table>
    {% endif %}

{% endblock %}